--- mm/mmap.c	2020-12-14 01:41:30.000000000 +0300
+++ mm/mmap.c	2022-03-31 00:35:36.000000000 +0300
@@ -1880,7 +1880,7 @@ unsigned long mmap_region(struct file *file, unsigned long addr,
 	if (vma->vm_ops && vma->vm_ops->close)
 		vma->vm_ops->close(vma);
 unmap_and_free_vma:
-	fput(vma->vm_file);
+	vma_fput(vma);
 	vma->vm_file = NULL;
 
 	/* Undo any partial mapping done by a device driver. */
